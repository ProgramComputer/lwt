<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Learning with Texts - Fork: Contributing to LWT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="lwt_icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Learning with Texts - Fork<span id="projectnumber">&#160;2.9.0-fork</span>
   </div>
   <div id="projectbrief">Learn foreign languages with texts</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Contributing to LWT </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This guide is mainly aimed at developers, but it can give useful insights on how LWT is structured, which could help with debugging. The first step you need to take is to clone LWT from the official GitHub repository (<a href="https://github.com/HugoFara/lwt">HugoFara/lwt</a>).</p>
<h1><a class="anchor" id="autotoc_md421"></a>
Get Composer</h1>
<p>Getting <a href="https://getcomposer.org/download/">Composer</a> is required if you want to edit LWT on the server side, but it will also be useful to edit JS and CSS code, so it is <em>highly recommended</em>. Composer is a lightweight dependency manager that <em>does not need</em> a server to run.</p>
<p>Once Composer is ready, go to the lwt folder (most likely <code>lwt/</code>), and type</p>
<div class="fragment"><div class="line">composer install --dev</div>
</div><!-- fragment --><p>This will automatically download all the required dependencies.</p>
<h1><a class="anchor" id="autotoc_md422"></a>
Create and Edit Themes</h1>
<p>Themes are stored at <code>src/themes/</code>. If you want to create a new theme, simply add it to a subfolder. You can also edit existing themes.</p>
<p>To apply the changes you made to a theme, run</p>
<div class="fragment"><div class="line">composer minify</div>
</div><!-- fragment --><p>This command will minify all CSS and JS.</p>
<p>Alternatively, you can run</p>
<div class="fragment"><div class="line">php -r &quot;require &#39;src/php/minifier.php&#39;; minifyAllCSS();&quot;</div>
</div><!-- fragment --><p>It minifies only CSS.</p>
<h2><a class="anchor" id="autotoc_md423"></a>
Debug your theme</h2>
<p>You may not want to see your code minified, so you can use</p>
<div class="fragment"><div class="line">composer no-minify</div>
</div><!-- fragment --><p>It has the same effect as copying the folder <code>src/themes/</code> to <code>themes/</code>. WARNING: It can break your relative paths!</p>
<h2><a class="anchor" id="autotoc_md424"></a>
Add Images to your Themes</h2>
<p>We support a smart minifying system: relative paths are automatically adapted to point to the previous location <em>while minifying only</em>. As a consequence:</p>
<ul>
<li>You can use images from <code>css/images/</code> in your theme.<ul>
<li>If your theme is under <code>src/themes/mytheme/</code>, you should use the path <code>../../../css/theimage</code>.</li>
</ul>
</li>
<li>You can add your own files under your custom theme folder.<ul>
<li>Hence, the path should look like <code>./myimage</code>.</li>
</ul>
</li>
</ul>
<p>When debugging your theme, files are simply copied to the <code>themes/</code> folder, which can break the path to files in <code>css/</code>.</p>
<h2><a class="anchor" id="autotoc_md425"></a>
My theme does not contain all the Skinning Files</h2>
<p>That's not a problem at all. When LWT looks for a file that should be contained in <code>src/themes/{{The Theme}}/</code>, it checks if the file exists. If not, it goes to <code>css/</code> and tries to get the same file. With this system, your themes <b>do not need to have the same files as <code>src/css/</code></b>.</p>
<h1><a class="anchor" id="autotoc_md426"></a>
Change JS behavior</h1>
<p>As with themes, LWT minifies JS code for a better user experience. Please refer to the previous section for detailed explanations; this section will only go through import points.</p>
<h2><a class="anchor" id="autotoc_md427"></a>
Edit JS code</h2>
<p>Clear code is stored at <code>src/js/</code>. Once again, the <em>actual</em> code used by LWT should be at <code>js/</code>. After you have done any modification, either run <code>composer minify</code> or <code>php -r "require 'src/php/minifier.php'; minifyAllJS();"</code>.</p>
<h2><a class="anchor" id="autotoc_md428"></a>
Debug JS code</h2>
<p>To copy code in a non-obfuscated form, run <code>composer no-minify</code> or replace the content of <code>js/</code> with <code>src/js/</code>.</p>
<h1><a class="anchor" id="autotoc_md429"></a>
Edit PHP code</h1>
<p>The PHP codebase is not yet well structured, but here is a general organization:</p>
<ul>
<li>Pages rendered to the client are under the root folder (<code><a class="el" href="do__text_8php.html" title="Start Reading a text (frameset)">do_text.php</a></code>, <code><a class="el" href="do__test_8php.html" title="Start a test (frameset)">do_test.php</a></code>, etc...)</li>
<li>Files that should not be rendered directly are under the <code>inc/</code> ("include") folder.</li>
<li>Other files useful for <em>development only</em> are under <code>src/php/</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md430"></a>
Testing your Code</h2>
<p>It is highly advised to test your code. Tests should be wrote under <code>tests/</code>. We use PHP Unit for testing.</p>
<p>To run all tests:</p>
<p><code>composer test</code></p>
<p>Alternatively:</p>
<p><code>./vendor/bin/phpunit</code></p>
<h2><a class="anchor" id="autotoc_md431"></a>
Security Check</h2>
<p>We use Psalm to find code flaws and inconsistencies. Use <code>./vendor/bin/psalm</code>.</p>
<p>You can configure the reporting level in <code>psalm.xml</code>.</p>
<h2><a class="anchor" id="autotoc_md432"></a>
Advice: Follow the Code Style Standards</h2>
<p>Nobody likes to debug unreadable code. A good way to avoid thinking about it is to include phpcs directly in your IDE. You can also download it and run it regularly on your code.</p>
<p>You can run it through composer. Use <code>php ./vendor/bin/squizlabs/phpcs.phar [filename]</code> to see style violations on a file. You can fix them using</p>
<div class="fragment"><div class="line">php ./vendor/bin/squizlabs/phpcbf.phar [filename]</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md433"></a>
Interact with and modify the REST API</h1>
<p>Starting from 2.9.0-fork, LWT provides a RESTful API. The main handler for the API is <code>api.php</code>. You can find a more exhaustive API documentation at <a class="el" href="md_docs_api.html">api.md</a>.</p>
<p>If you plan to develop the API, please follow the RESTful standards. To debug:</p>
<ol type="1">
<li>Install Node and NPM.</li>
<li>Run <code>npm install</code> in the main LWT folder.</li>
<li>Run <code>npm test</code> to test the API.</li>
</ol>
<h1><a class="anchor" id="autotoc_md434"></a>
Improving Documentation</h1>
<p>To regenerate all PHP and Markdown documentation, use <code>composer doc</code>. For the JS documentation, you need NPM. Use <code>./node_modules/.bin/jsdoc -c jsdoc.json</code>.</p>
<h2><a class="anchor" id="autotoc_md435"></a>
General Documentation</h2>
<p>The documentation is split across Markdown (<code>.md</code>) files in <code>docs/</code>. Then, those files are requested by <code><a class="el" href="info_8php.html" title="LWT Information / Help.">info.php</a></code>. The final version is <code>info.html</code>, which contains all files.</p>
<p>To regenerate <code>info.hml</code>, run <code>composer info.html</code>.</p>
<h2><a class="anchor" id="autotoc_md436"></a>
PHP Code Documentation</h2>
<p>Code documentation (everything under <code>docs/html/</code> and <code>docs/php/</code>) is automatically generated. If you see an error, the PHP code is most likely at fault. However, don't hesitate to signal the issue.</p>
<p>Currently, the PHP documentation is generated two times:</p>
<ul>
<li>With <a href="https://www.doxygen.nl/index.html">Doxygen</a> (run <code>doxygen Doxyfile</code> to regenerate it), it generates documentation for MarkDown and PHP files. It will be removed in LWT 3.0.0.</li>
<li>Using <a href="https://phpdoc.org/">phpDocumentor</a>. phpDoc generates PHP documentation and is the preferred way to do so. You can use it through <code>php tools/phpDocumentor</code> if installed with <a href="https://phar.io/">Phive</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md437"></a>
JS Code Documentation</h2>
<p>Code documentation for JavaScript is available at <code>docs/js/</code> is is generated thourgh <a href="https://jsdoc.app/">JSDoc</a>. The JSDoc configuration file is <code>jsdoc.json</code>.</p>
<h1><a class="anchor" id="autotoc_md438"></a>
New version</h1>
<p>LWT-fork follows a strict procedure for new versions. This section is mainly intended for the maintainers, but feel free to take a peak at it.</p>
<p>The steps to publish a new version are:</p>
<ol type="1">
<li>In the <a class="el" href="md_docs__c_h_a_n_g_e_l_o_g.html">CHANGELOG</a>, add the latest release number and date.</li>
<li>Update <code>get_version</code> in <code><a class="el" href="kernel__utility_8php.html" title="Core utility functions that do not require a complete session.">inc/kernel_utility.php</a></code> with the release number and date.</li>
<li>Update <code>PROJECT_NUMBER</code> in <code>Doxyfile</code> to the latest release number.</li>
<li>Regenerate documentation with <code>composer doc</code>.</li>
<li>Commit your changes, <code>git commit -m "Regenerates documentation for release []."</code></li>
<li>Add a version tag with annotation <code>git tag -a [release number]</code> and push the changes.</li>
<li>If all the GitHub actions are successfull, write a new release on GitHub linking to the previously created tag.</li>
<li>The new version is live!</li>
</ol>
<h1><a class="anchor" id="autotoc_md439"></a>
Other Ways of Contribution</h1>
<h2><a class="anchor" id="autotoc_md440"></a>
Drop a star on GitHub</h2>
<p>This is an open-source project. It means that anyone can contribute, but nobody gets paid for improving it. Dropping a star, leaving a comment, or posting an issue is <em>essential</em> because the only reward developers get from time spent on LWT is the opportunity to discuss with users.</p>
<h2><a class="anchor" id="autotoc_md441"></a>
Spread the Word</h2>
<p>LWT is a non-profitable piece of software, so we won't have much time or money to advertise it. If you enjoy LWT and want to see it grow, share it!</p>
<h2><a class="anchor" id="autotoc_md442"></a>
Discuss</h2>
<p>Either go to the forum of the <a href="https://sourceforge.net/p/learning-with-texts/discussion/">official LWT version</a>, or come and <a href="https://github.com/HugoFara/lwt/discussions">discuss on the community version</a>.</p>
<h2><a class="anchor" id="autotoc_md443"></a>
Support on OpenCollective</h2>
<p>LWT is hosted on OpenCollective, you can support the development of the app at <a href="https://opencollective.com/lwt-community">https://opencollective.com/lwt-community</a>.</p>
<p>Thanks for your interest in contributing! </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
